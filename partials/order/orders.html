<div class="row">

    <div class="col-sm-22 col-sm-offset-1">
        <h1>Pedidos <span ng-bind="filteredOrders.length"></span></h1>
        
        <form class="form-inline text-right">
            <div class="form-group">
        		<input class="form-control input-xs" id="orderQuery" name="orderQuery" ng-model="orderQuery" type="text" placeholder="Buscar pedido">
            </div>
        	<div class="form-group">
                <select class="form-control" id="order" ng-model="selectedOrder">
                    <option value="updated" selected>Data</option>
                    <option value="customer.email">Cliente</option>
                    <option value="district">Bairro</option>
                    <option value="city">Cidade</option>
                    <option value="deliveryOption">Entrega</option>
                    <option value="products">Produto</option>
                    <option value="payment_status">Pagamento</option>
                    <option value="invalid">Inválido</option>
                </select>
        	</div>
        </form>
        
        <br>
        
        <div class="btn-group" role="group">
        	<button 
        		type="button" 
        		class="btn btn-sm btn-primary" 
        		ng-class="selectedFilterInvalidValue === '' ? 'active' : ''"
        		ng-click="setFilterStatus('')"
        	>Tudo</button>
        	<button ng-repeat="(index, status) in statuses"
        		type="button" 
        		class="btn btn-sm btn-primary" 
        		ng-class="filterStatus === index ? 'active' : ''"
        		ng-click="setFilterStatus(index)"
        		ng-bind="status.name"
        	></button>
        </div>
        
        <br><br>
        
        <table class="table table-condensed table-stripped table-hover small">
            <thead>
                <tr>
                    <td>Ref</td>
                    <td>Cliente</td>
                    <td>Fone</td>
                    <td>Bairro</td>
                    <td>Cidade</td>
                    <td>Entrega</td>
                    <td>Produtos</td>
                    <td>Data</td>
                    <td>Status</td>
                    <td>Pagamento</td>
                    <td>Ações</td>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="order in filteredOrders = (orders | filter: orderQuery | orderBy: selectedOrder:true | filter: {status : filterStatus})">
                    <td><a href="/pedido/{{order._id}}" ng-bind="order._id"></a></td>
                    <td><a href="/usuario/{{order.customer._id}}" ng-bind="order.customer.name || order.customer.email"></a></td>
                    <td ng-bind="order.shipping.phone"></td>
                    <td ng-bind="order.shipping.district"></td>
                    <td ng-bind="order.shipping.city"></td>
                    <td ng-bind="order.shipping.deliveryOption"></td>
                    <td ng-bind="order.products.length"></td>
                    <td ng-bind="order.updated | date:'dd/MM/yyyy'"></td>
                    <td ng-switch="order.status" title="{{statuses[order.status].name}} - {{statuses[order.status].desc}}">
                        <i ng-switch-when="0" class="fa fa-fw fa-money text-info"></i>
                        <i ng-switch-when="1" class="fa fa-fw fa-truck fa-flip-horizontal text-warning"></i>
                        <i ng-switch-when="2" class="fa fa-fw fa-check text-success"></i>
                        <i ng-switch-when="3" class="fa fa-fw fa-close text-danger"></i>
                        <i ng-switch-when="4" class="fa fa-fw fa-exclamation text-danger"></i>
                        <i ng-switch-when="5" class="fa fa-fw fa-ban text-danger"></i>
                    </td>
                    <td ng-bind="order.payment_date"></td>
                    <td><a ng-click="dropOrder(order)" href="javascrip:void(0)">x</a></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>