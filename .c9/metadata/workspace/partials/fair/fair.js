{"filter":false,"title":"fair.js","tooltip":"/partials/fair/fair.js","undoManager":{"mark":38,"position":38,"stack":[[{"group":"doc","deltas":[{"start":{"row":9,"column":23},"end":{"row":9,"column":24},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":24},"end":{"row":9,"column":25},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":25},"end":{"row":9,"column":26},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":26},"end":{"row":9,"column":27},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":27},"end":{"row":9,"column":28},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":24},"end":{"row":13,"column":25},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":25},"end":{"row":13,"column":26},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":26},"end":{"row":13,"column":27},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":27},"end":{"row":13,"column":28},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":24},"end":{"row":9,"column":28},"action":"remove","lines":["fair"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":24},"end":{"row":9,"column":25},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":12,"column":5},"action":"remove","lines":["  $routeProvider.when('/product', {","    templateUrl: 'partials/fair/productFormModal.html',","    controller: 'FairCtrl'","  });"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":5},"end":{"row":9,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":32},"end":{"row":10,"column":48},"action":"remove","lines":["productFormModal"]},{"start":{"row":10,"column":32},"end":{"row":10,"column":33},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":33},"end":{"row":10,"column":34},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":34},"end":{"row":10,"column":35},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":35},"end":{"row":10,"column":36},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":36},"end":{"row":10,"column":37},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":37},"end":{"row":10,"column":38},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":38},"end":{"row":10,"column":39},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":98,"column":0},"end":{"row":176,"column":3},"action":"remove","lines":["  $scope.productModalFormSubmit = function () {","    ","    $scope.saving_product = true;","    ","    if($scope.productFormModalObject._id){","      ","       $scope.productPut($scope.productFormModalObject);","      ","    } else {","","      $scope.productPost($scope.productFormModalObject); ","","    }","","  }","  ","  $scope.productPost = function(product) {","    ","    $http.post(myConfig.apiUrl + '/products', product)","    .success(function(resp) {","      ","        $scope.products = resp.data;","        window.location = (\"#/product/\" + resp._id);","        ","    })","    .error(function (resp) {","      ","      var error_list = [];","","      angular.forEach(resp.errors, function(error, path) {","        this.push(error.message);","      }, error_list);","      ","      $scope.$emit('alert', {","          kind: 'danger',","          msg: error_list,","          title: \"Não foi possível inserir o produto. Verifique o motivo abaixo:\"","      });","  ","    })","    .finally(function () {","      $scope.saving_product = false;","    });","  ","  };","","  $scope.productPut = function(product) {","    ","    $http.put(myConfig.apiUrl + '/products/'+product._id, product)","    .success(function(resp) {","      ","      $scope.products = resp.data;","","      $scope.$emit('alert', {","          kind: 'success',","          msg: '',","          title: \"Produto editado com sucesso\"","      });","","    })","    .error( function(resp) {","      ","      var error_list = [];","","      angular.forEach(resp.errors, function(error, path) {","        this.push(error.message);","      }, error_list);","      ","      $scope.$emit('alert', {","          kind: 'danger',","          msg: error_list,","          title: \"Não foi possível inserir o produto. Verifique o motivo abaixo:\"","      });","  ","    })","    .finally(function () {","      $scope.saving_product = false;","    });","  }"]}]}],[{"group":"doc","deltas":[{"start":{"row":98,"column":0},"end":{"row":99,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":98,"column":0},"end":{"row":99,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":96,"column":3},"end":{"row":96,"column":4},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":0},"end":{"row":96,"column":4},"action":"remove","lines":["  $scope.dropProduct = function(product) {","    var confirmed = confirm('Deseja realmente excluir o produto ' + product.name + \"?\");","      ","    if (confirmed) {","","      $scope.saving_product = true;","        $http.delete(myConfig.apiUrl + '/products/' + product._id)","        .success(function() {","          window.location = (\"#/fair\");","        })","        .error(function (resp) {","          ","          var error_list = [];","    ","          angular.forEach(resp.errors, function(error, path) {","            this.push(error.message);","          }, error_list);","          ","          $scope.$emit('alert', {","              kind: 'danger',","              msg: error_list,","              title: \"Não foi possível inserir o produto. Verifique o motivo abaixo:\"","          });","    ","      })","      .finally(function () {","        $scope.saving_product = false;","      });","      ","    };","    ","  };"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":2},"end":{"row":65,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":0},"end":{"row":64,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":63,"column":5},"end":{"row":64,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":0},"end":{"row":36,"column":4},"action":"remove","lines":["\t$scope.categories = [","\t\t'Frutas',","\t\t'Verduras',","\t\t'Legumes',","\t\t'Temperos',","\t\t'Grãos',","\t\t'Farinhas e Cereais',","\t\t'Geléias',","\t\t'Óleos',","\t\t'Conservas',","\t\t'Bebidas',","\t\t'Chás',","\t\t'Pães',","\t\t'Embalagens'","  ];"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":0},"end":{"row":49,"column":4},"action":"remove","lines":["  $http.get(myConfig.apiUrl + '/products').then(function(resp) {","    ","      $scope.products = resp.data;","","      $scope.productFormModalObject = ($filter('filter')($scope.products, {_id: $routeParams.id}, false))[0];","  ","  }, function(err) {","    ","      console.error('ERR', err);","","  })"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":0},"end":{"row":39,"column":0},"action":"remove","lines":["  // http://104.154.82.56/api/products - URL do recurso","  //$http.get('//fodev-api-vinagreti.c9.io/v1/products').then(function(resp) {",""]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":0},"end":{"row":37,"column":1},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":0},"end":{"row":37,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":3},"end":{"row":36,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":0},"end":{"row":23,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["  $http.get(myConfig.apiUrl + '/products').then(function(resp) {","    ","      $scope.products = resp.data;","","      $scope.productFormModalObject = ($filter('filter')($scope.products, {_id: $routeParams.id}, false))[0];","  ","  }, function(err) {","    ","      console.error('ERR', err);","","  })"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":4},"end":{"row":34,"column":0},"action":"insert","lines":["",""]},{"start":{"row":34,"column":0},"end":{"row":34,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":4},"end":{"row":33,"column":5},"action":"insert","lines":[";"]}]}]]},"ace":{"folds":[],"scrolltop":62,"scrollleft":0,"selection":{"start":{"row":31,"column":32},"end":{"row":31,"column":32},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1427506833113,"hash":"d70cc265d6914ef16c92e76c24937dc280e23f5d"}