{"filter":false,"title":"fair.js","tooltip":"/partials/fair/fair.js","ace":{"folds":[],"scrolltop":300,"scrollleft":0,"selection":{"start":{"row":38,"column":0},"end":{"row":38,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":54,"state":"start","mode":"ace/mode/javascript"}},"hash":"93d2d335131082c104d00756228f461a1c179578","undoManager":{"mark":5,"position":5,"stack":[[{"group":"doc","deltas":[{"start":{"row":53,"column":0},"end":{"row":87,"column":4},"action":"remove","lines":["  $scope.addToBasket = function (product) {","    ","    var basketProduct = ($filter('filter')($scope.$storage.basket.products, {_id: product._id}, false))[0];","    ","    if(basketProduct){","      ","      basketProduct.quantity = basketProduct.quantity >= 0 ? basketProduct.quantity : 1;","      ","      basketProduct.quantity ++;","      ","    }  else {","","      product.quantity = 1;","","      $scope.$storage.basket.products.push(product);","","    }","    ","    $scope.$storage.basket.total += parseFloat(product.price);","    ","  };","","  $scope.dropFromBasket = function (product) {","    ","    var productIndex = $scope.$storage.basket.products.indexOf(product);","","    if (productIndex >= 0) {","      ","      $scope.$storage.basket.products.splice(productIndex, 1);","      ","      $scope.$storage.basket.total -= parseFloat(product.price) * product.quantity;","      ","    }","","  };"]},{"start":{"row":53,"column":0},"end":{"row":101,"column":4},"action":"insert","lines":["  $scope.addToBasket = function (product) {","    ","    var basketProduct = ($filter('filter')($scope.$storage.basket.products, {_id: product._id}, false))[0];","    ","    if(basketProduct){","      ","      basketProduct.quantity = basketProduct.quantity >= 0 ? basketProduct.quantity : 1;","      ","      basketProduct.quantity ++;","      ","    }  else {","","      product.quantity = 1;","","      $scope.$storage.basket.products.push(product);","","    }","    ","    $scope.$storage.basket.total += parseFloat(product.price);","    ","  };","","  $scope.dropFromBasket = function (product, decreasingAmount) {","    ","    var productIndex = $scope.$storage.basket.products.indexOf(product);","    ","    var product = $scope.$storage.basket.products[productIndex];","","    if (productIndex >= 0) {","","      if (decreasingAmount > 0 & product.quantity > decreasingAmount) {","        ","        product.quantity -= decreasingAmount;","        ","        $scope.$storage.basket.total -= product.price * decreasingAmount;","        ","      } else {","        ","        $scope.$storage.basket.total -= parseFloat(product.price) * product.quantity;","        ","        $scope.$storage.basket.products.splice(productIndex, 1);   ","        ","      }","      ","      ","      ","    }","","  };"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":0},"end":{"row":45,"column":3},"action":"remove","lines":["\tif(!$scope.$storage.basket || !$scope.$storage.basket.products){","  \t$scope.$storage.basket = {","  \t  total: 0,","  \t  name: 'Minha cesta',","  \t  products: []","  \t};\t  ","\t};"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":0},"end":{"row":40,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":0},"end":{"row":40,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":2},"end":{"row":39,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":0},"end":{"row":38,"column":2},"action":"remove","lines":["  "]}]}]]},"timestamp":1427841125000}